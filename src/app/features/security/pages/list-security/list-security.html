<div class="p-8 bg-transparent min-h-screen">
    
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8 bg-slate-800/20 p-4 rounded-3xl border border-slate-700/30 backdrop-blur-sm">
        
        <div class="flex bg-slate-900/50 p-1.5 rounded-2xl border border-slate-700/50 w-fit">
            <button (click)="activeTab.set('roles')"
                [class]="activeTab() === 'roles' ? 'bg-indigo-600 text-white shadow-lg' : 'text-slate-400 hover:text-slate-200'"
                class="flex items-center gap-2 px-6 py-2.5 rounded-xl font-bold transition-all duration-300">
                <span class="material-icons text-sm">admin_panel_settings</span>
                Roles
            </button>
            <button (click)="activeTab.set('features')"
                [class]="activeTab() === 'features' ? 'bg-indigo-600 text-white shadow-lg' : 'text-slate-400 hover:text-slate-200'"
                class="flex items-center gap-2 px-6 py-2.5 rounded-xl font-bold transition-all duration-300">
                <span class="material-icons text-sm">extension</span>
                Funcionalidades
            </button>
        </div>

        <div class="flex items-center">
            @if (auth.hasPermission(PERMS.SECURITY.CREATE)) {
                
                @if (activeTab() === 'roles') {
                    <button (click)="goToRoleForm()" 
                        class="group flex items-center gap-3 bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-3 rounded-2xl font-bold transition-all shadow-lg shadow-indigo-600/20 active:scale-95">
                        <span class="material-icons group-hover:rotate-12 transition-transform">add_moderator</span>
                        Nuevo Rol
                    </button>
                } @else {
                    <button (click)="goToFeatureForm()" 
                        class="group flex items-center gap-3 bg-emerald-600 hover:bg-emerald-500 text-white px-8 py-3 rounded-2xl font-bold transition-all shadow-lg shadow-emerald-900/20 active:scale-95">
                        <span class="material-icons group-hover:rotate-12 transition-transform">extension</span>
                        Nueva Funcionalidad
                    </button>
                }

            }
        </div>
    </div>

    <div class="animate-in fade-in slide-in-from-bottom-4 duration-500">
        
        @if (security.isLoading()) {
            <div class="flex flex-col items-center justify-center py-20 bg-slate-800/30 rounded-3xl border border-slate-700/50">
                <div class="animate-spin rounded-full h-12 w-12 border-4 border-slate-700 border-t-indigo-500 mb-4"></div>
                <p class="text-slate-500 font-medium">Sincronizando con el servidor...</p>
            </div>
        } @else {
            
            <div class="bg-slate-800/20 rounded-3xl border border-slate-700/30 overflow-hidden backdrop-blur-md">
                @if (activeTab() === 'roles') {
                    <app-generic-table 
                        [data]="security.roles()" 
                        [columns]="roleColumns" 
                        [actions]="roleActions"
                        [loading]="security.isLoading()">
                    </app-generic-table>
                } @else {
                    <app-generic-table 
                        [data]="security.features()" 
                        [columns]="featureColumns" 
                        [actions]="featureActions"
                        [loading]="security.isLoading()">
                    </app-generic-table>
                }
            </div>
        }
    </div>
</div>