<div class="p-8 min-h-screen bg-transparent">
    <div class="flex justify-between items-end mb-8">
        <div>
            <h1 class="text-3xl font-bold text-white tracking-tight">Gesti√≥n de Roles</h1>
            <p class="text-slate-400 mt-1">Configura los niveles de acceso y la matriz de permisos.</p>
        </div>

        <button (click)="goToRoleForm()"
            class="flex items-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white px-5 py-2.5 rounded-xl transition-all shadow-lg shadow-indigo-500/20 active:scale-95">
            <span class="material-icons text-lg">add</span>
            <span class="font-semibold">Nuevo Rol</span>
        </button>
    </div>

    @if (security.isLoading()) {
    <div class="flex flex-col items-center justify-center py-20 bg-slate-800/30 rounded-3xl border border-slate-700/50">
        <div class="animate-spin rounded-full h-12 w-12 border-4 border-slate-700 border-t-indigo-500 mb-4"></div>
        <p class="text-slate-500 animate-pulse">Cargando roles...</p>
    </div>
    } @else {
    <div class="overflow-hidden bg-slate-800/40 backdrop-blur-md border border-slate-700/50 rounded-3xl shadow-2xl">
        <table class="w-full text-left border-collapse">
            <thead>
                <tr class="bg-slate-800/60 border-b border-slate-700">
                    <th class="px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest">Identificador</th>
                    <th class="px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest">Nombre del Rol</th>
                    <th class="px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest text-center">
                        Permisos</th>
                    <th class="px-6 py-4 text-xs font-bold text-slate-400 uppercase tracking-widest text-right">Acciones
                    </th>
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-700/50">
                @for (role of security.roles(); track role.id) {
                <tr class="hover:bg-slate-700/30 transition-colors group">
                    <td class="px-6 py-4">
                        <code
                            class="text-indigo-400 font-mono text-sm bg-indigo-500/10 px-2 py-1 rounded-md border border-indigo-500/20">
                  {{ role.name }}
                </code>
                    </td>
                    <td class="px-6 py-4 font-semibold text-slate-200">
                        {{ role.showName }}
                    </td>
                    <td class="px-6 py-4 text-center">
                        <span
                            class="inline-flex items-center justify-center bg-slate-700 text-slate-300 text-[10px] font-bold px-2 py-1 rounded-full min-w-[24px]">
                            {{ role.permissionIds?.length || 0 }}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-right">
                        <div class="flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                            <button (click)="goToRoleForm(role)"
                                class="p-2 text-slate-400 hover:text-white hover:bg-slate-600 rounded-lg transition-all"
                                title="Editar">
                                <span class="material-icons text-xl">edit_note</span>
                            </button>
                            <button
                                class="p-2 text-slate-400 hover:text-rose-400 hover:bg-rose-500/10 rounded-lg transition-all"
                                title="Eliminar">
                                <span class="material-icons text-xl">delete_outline</span>
                            </button>
                        </div>
                    </td>
                </tr>
                } @empty {
                <tr>
                    <td colspan="4" class="px-6 py-24 text-center">
                        <div class="flex flex-col items-center opacity-20">
                            <span class="material-icons text-6xl text-slate-400">shield_lock</span>
                            <p class="mt-4 text-xl font-medium">No se encontraron roles</p>
                        </div>
                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>
    }
</div>